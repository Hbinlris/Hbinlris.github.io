(function(){"use strict";var t={6487:function(t,e,s){var o=s(6848),a=s(788),n=s.n(a);let i={};const r=n().create(i);r.interceptors.request.use((function(t){return t}),(function(t){return Promise.reject(t)})),r.interceptors.response.use((function(t){return t}),(function(t){return Promise.reject(t)})),Plugin.install=function(t){t.axios=r,window.axios=r,Object.defineProperties(t.prototype,{axios:{get(){return r}},$axios:{get(){return r}}})},o.Ay.use(Plugin);const l=n().create({baseURL:"https://apis.netstart.cn/yunyuedu"});const c=t=>l.get(`/store/navi.json?gender=${t}`),h=(t="/store/show.json ? type = recommend & uuid= f2cb32ff209f4010911a77a617add8c4")=>{const e=t.match(/\?([^#]+)/),s=e?e[1]:"";return console.log("queryParams",s),l.get(`/store/show.json?${s}`)},u=()=>l.get("/mergedCategroy.json",{}),d=t=>{console.log("112",t);const e=t||"7";return l.get(`/source/v2/searchBook.json?catId=${e}`)},v=t=>l.get("book/getsub.json",{params:{id:t}}),p=t=>l.get("/book/simpleInfo.json",{params:{id:t}}),m=t=>l.get("/book/catalog.json",{params:{tocId:t}}),f=(t,e)=>l.get("/reader/book/content.json",{params:{source_uuid:t,content_uuid:e}}),g=t=>(console.log("id12456",t),l.get(`comment/getComments.json?bookId=${t}`,{})),k=t=>{console.log("ids",t);const e=JSON.stringify(t);return console.log("idsString",e),l.get(`/shelf/detail.json?ids=${encodeURIComponent(e)}`)},C=t=>l.get(`/search/book/data.json?key=${t}`);var b=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"app"}},[e("nav",[t.$route.meta.keepAlive?e("van-tabbar",{attrs:{route:""}},[e("van-tabbar-item",{staticClass:"iconfont icon-shuben",attrs:{replace:"",to:"/"}},[t._v("书城")]),e("van-tabbar-item",{staticClass:"iconfont icon-fenlei",attrs:{replace:"",to:"/ClassLfy"}},[t._v("分类")]),e("van-tabbar-item",{staticClass:"iconfont icon-shujia",attrs:{replace:"",to:"/BookShelf"}},[t._v("书架")]),e("van-tabbar-item",{staticClass:"iconfont icon-wode",attrs:{replace:"",to:"/ItsMine"}},[t._v("个人中心")])],1):t._e()],1),e("router-view")],1)},y=[],_=s(9363),w=s(6141),x={components:{"van-tabbar":_.A,"van-tabbar-item":w.A},data(){return{}},created(){},methods:{},mounted(){}},I=x,A=s(1656),S=(0,A.A)(I,b,y,!1,null,"92e03514",null),N=S.exports,B=(s(8992),s(2577),s(3518));o.Ay.use(B.Ay);var P=new B.Ay.Store({state:{isAuthenticated:!1,user:null},getters:{isAuthenticated:t=>t.isAuthenticated,user:t=>t.user},mutations:{setAuthentication(t,e){t.isAuthenticated=e},setUser(t,e){t.user=e}},actions:{login({commit:t},e){let s=JSON.parse(localStorage.getItem("users"))||[];const o=s.find((t=>t.username===e.username));o&&(t("setUser",o),t("setAuthentication",!0),localStorage.setItem("users",JSON.stringify(s)))},logout({commit:t}){t("setUser",null),t("setAuthentication",!1)},initializeStore({commit:t}){const e=JSON.parse(localStorage.getItem("users")).find((t=>t.isAuthenticated));e&&(t("setUser",e),t("setAuthentication",!0))}},modules:{}}),$=s(6178),L=function(){var t=this,e=t._self._c;return e("div",{staticClass:"BookStore"},[e("nav",[e("div",{staticClass:"gender",on:{click:t.gender}},[t.bothSexes?e("div",{staticClass:"iconfont icon-nan"}):e("div",{staticClass:"iconfont icon-nv"})]),e("div",{staticClass:"search",on:{click:t.gotoSearchBook}},[e("input",{attrs:{type:"text"}}),e("span",{staticClass:"iconfont icon-sousuo"})])]),e("BookstoreNav",{attrs:{gender:t.genderNumber},on:{BookstoreNavUrl:t.BookstoreNavUrl}}),e("BookstoreNavTwo",{attrs:{url:t.urlForNavTwo}})],1)},D=[],T=(s(4114),function(){var t=this,e=t._self._c;return e("div",{staticClass:"BookstoreNav"},[e("nav",t._l(t.BookstoreNavs,(function(s){return e("div",{key:s.id,staticClass:"nav-Bookstore",class:{active:t.nav===s.url},on:{click:function(e){return t.boookstorenavId(s.url)}}},[t._v(" "+t._s(s.name)+" ")])})),0)])}),M=[],O={name:"BookstoreNav",props:{gender:{type:Number}},watch:{gender(t){this.fetchBookstoreNavs(t)}},data(){return{BookstoreNavs:[],nav:null}},created(){this.fetchBookstoreNavs(this.gender)},methods:{boookstorenavId(t){console.log("url1",t),this.$emit("BookstoreNavUrl",t),this.nav=t},fetchBookstoreNavs(t){c(t).then((t=>{this.BookstoreNavs=t.data.data.navi,console.log("书城导航",this.BookstoreNavs),this.BookstoreNavs.length>0&&this.boookstorenavId(this.BookstoreNavs[0].url)})).catch((t=>{console.error("加载书城导航失败:",t)}))}}},U=O,j=(0,A.A)(U,T,M,!1,null,"076bcc3e",null),q=j.exports,J=function(){var t=this,e=t._self._c;return e("van-pull-refresh",{on:{refresh:t.onRefresh},model:{value:t.isLoading,callback:function(e){t.isLoading=e},expression:"isLoading"}},[e("div",{staticClass:"bookstorenavtwo"},[e("main",[t._l(t.BookstoreNavTwos,(function(s){return e("div",{key:s.index,staticClass:"bookstorenavtwo-name"},[s.banners&&s.banners.length>0?e("van-swipe",{staticClass:"my-swipe",attrs:{autoplay:3e3,"indicator-color":"white"}},t._l(s.banners,(function(t){return e("van-swipe-item",{key:t.id},[e("img",{attrs:{src:t.cover,alt:""}})])})),1):t._e(),s.cover?e("img",{directives:[{name:"lazy",rawName:"v-lazy",value:s.cover,expression:"module.cover"}],attrs:{alt:""}}):e("h3",[t._v(t._s(s.name))]),36===s.module?e("div",{staticClass:"everyonelook"},t._l(s.list,(function(s){return e("div",{key:s.id,staticClass:"imagelook",on:{click:function(e){return t.gotobookDetails(s.id,s.title,s.cover,s.extra)}}},[e("img",{directives:[{name:"lazy",rawName:"v-lazy",value:s.cover,expression:"book.cover"}],attrs:{alt:""}}),e("div",{staticClass:"bookright"},[e("div",{staticClass:"looktitle"},[t._v(t._s(s.title))]),e("div",{staticClass:"classificationOfAuthors"},[t._v(" "+t._s(` ${s.author}/${s.category} `)+" ")]),e("div",{staticClass:"briefIntroduction"},[t._v(t._s(s.content))])])])})),0):e("div",{staticClass:"bookstorenavtwo-list"},t._l(s.list,(function(o){return e("div",{key:o.id,staticClass:"image",on:{click:function(e){return t.gotobookDetails(o.id,o.title,o.cover,o.extra)}}},[e("van-image",{staticClass:"img",style:{width:s.list.length>3?"20vw":"30vw",height:s.list.length>3?"30vw":"40vw"},attrs:{src:o.cover,alt:""}}),e("div",{staticClass:"title",style:{width:s.list.length>3?"20vw":"30vw"}},[t._v(" "+t._s(o.title)+" ")])],1)})),0)],1)})),t.isprompt?e("div",{staticClass:"prompt"},[t._v("我是有底线的≧∇≦")]):t._e()],2),t.load?e("div",{staticClass:"load"},[e("span",[t._v("加")]),e("span",[t._v("载")]),e("span",[t._v("中")]),e("span",[t._v(".")]),e("span",[t._v(".")]),e("span",[t._v(".")])]):t._e()])])},z=[],R=(s(8872),s(1981)),E={name:"BookstoreNavTwo",props:["url"],data(){return{shortCuts:[],BookstoreNavTwos:[],cover:"",banners:"",isprompt:!1,isLoading:!1,load:!0}},created:function(){this.onRefresh(this.url)},computed:{},watch:{url:{immediate:!0,handler(t){this.onRefresh(t)}}},methods:{onRefresh(t){setTimeout((()=>{(0,R.A)("刷新成功"),this.isLoading=!1,h(t).then((t=>{console.log("二级111",t),this.BookstoreNavTwos=t.data.data.list,console.log("二级555",this.BookstoreNavTwos),this.shortCuts=this.extractShortcuts(this.BookstoreNavTwos),this.isprompt=!0,this.load=!1}))}),2e3)},extractShortcuts(t){return t.reduce(((t,e)=>{const s=e.shortCut;return s&&t.push(...s),e.list&&Array.isArray(e.list)&&t.push(...this.extractShortcuts(e.list)),t}),[])},gotobookDetails(t,e,s,o){console.log("gotobookDetails",t,e,s,o),this.$router.push({path:"/bookDetails",query:{id:t,title:e,cover:s,extra:o}})}}},F=E,H=(0,A.A)(F,J,z,!1,null,"3c804cb3",null),V=H.exports,W={name:"BookStore",components:{BookstoreNav:q,BookstoreNavTwo:V},data(){return{bothSexes:!0,genderNumber:1,urlForNavTwo:""}},methods:{gender(){this.bothSexes=!this.bothSexes,this.genderNumber=this.bothSexes?1:2,console.log(this.genderNumber)},BookstoreNavUrl(t){this.urlForNavTwo=t},gotoSearchBook(){this.$router.push({path:"/SearchBook"})}}},Y=W,G=(0,A.A)(Y,L,D,!1,null,"f228f1c0",null),K=G.exports,Q=function(){var t=this,e=t._self._c;return e("div",{staticClass:"ClassLfy"},[e("nav",[e("div",{staticClass:"channel"},t._l(t.ClassLfy,(function(s){return e("div",{key:s.channel,staticClass:"channel-name",class:{active:s===t.onchannel},on:{click:function(e){return t.ClassLfyNavClassify(s)}}},[t._v(" "+t._s(s.name)+" ")])})),0),e("div",{staticClass:"search",on:{click:function(e){return t.$router.push({path:"/SearchBook"})}}},[e("div",{staticClass:"iconfont icon-sousuo"})])]),e("main",[e("ClassLfyTwo",{attrs:{channel:t.onchannel}})],1)])},X=[],Z=function(){var t=this,e=t._self._c;return e("div",{staticClass:"ClassLfyTwo"},[e("nav",[e("div",{staticClass:"navbook"},t._l(t.namesArray,(function(s){return e("div",{key:s.url,staticClass:"list",class:{active:s.url===t.currentUrl},on:{click:function(e){return t.gotoClassLfyBook(s.url)}}},[t._v(" "+t._s(s.name)+" ")])})),0)]),e("ClassLfyBook",{attrs:{catId:t.catId}})],1)},tt=[],et=(s(4520),s(670),s(1454),function(){var t=this,e=t._self._c;return e("div",{staticClass:"ClassLfyBook"},[t._l(t.ClassLfyBooks,(function(s){return e("div",{key:s.id,staticClass:"ClassLfyBook-container",on:{click:function(e){return t.gotobookDetails(s.id,s.title,s.cover,s.extra)}}},[e("van-image",{staticClass:"img",attrs:{src:s.cover,alt:""}}),e("div",{staticClass:"Bookstxt"},[e("div",{staticClass:"title"},[t._v(t._s(s.title))]),e("div",{staticClass:"name"},[t._v(t._s(s.author))])])],1)})),e("bookDetails")],2)}),st=[],ot=function(){var t=this,e=t._self._c;return t.$route.meta.detail?e("div",{staticClass:"bookDetails"},[e("div",{staticClass:"return iconfont icon-fanhui",on:{click:function(e){return t.$router.go(-1)}}}),t.bookDetail?e("div",{staticClass:"bookDetails-container"},[e("div",{staticClass:"title"},[e("van-image",{staticClass:"img",attrs:{src:t.bookCover,alt:""}}),e("div",{staticClass:"bookstitle"},[e("div",{staticClass:"booksname"},[t._v(t._s(t.bookDetail.feed.entry.title))]),e("div",{staticClass:"name"},[t._v(" "+t._s(`${t.bookCategory}|${t.bookDetail.feed.entry.author.name}`)+" ")]),e("div",{staticClass:"WordCount"},[e("span",[t._v(t._s(t.bookExtra))]),e("span",[t._v(t._s(t.bookclicksCount))])])])],1),e("div",{staticClass:"SimpleSeashell"},[e("p",{class:{"no-ellipsis":t.Retract},on:{click:t.retract}},[t._v(" "+t._s(t.bookDetail.feed.entry.summary)+" ")]),e("div",{directives:[{name:"show",rawName:"v-show",value:t.Retract,expression:"Retract"}],staticClass:"authorization"},[t.bookAuthorizer?e("p",[t._v("授权方："+t._s(t.bookAuthorizer))]):t._e(),e("p",[t._v("作品类型："+t._s(t.bookPaydesc))])]),e("div",{staticClass:"chapter",on:{click:function(e){return t.gotoDirectory(t.bookId,t.bookCover)}}},[e("div",[t._v(t._s(t.latestArticleTitle))]),e("div",[t._v(">")])])])]):t._e(),e("div",{staticClass:"comments"},[t._m(0),t._l(t.comments,(function(s){return e("div",{key:s.commentId,staticClass:"comments-container"},[e("van-skeleton",{attrs:{title:"",avatar:"",row:3,loading:t.loading}},[e("van-image",{staticClass:"img",attrs:{src:s.avatar,alt:""}}),e("div",{staticClass:"reight"},[e("div",{staticClass:"name"},[t._v(t._s(s.nickName))]),e("div",{staticClass:"time"},[t._v(t._s(t.formatDate(s.time)))]),e("div",{staticClass:"text"},[t._v(t._s(s.comment))])])],1)],1)}))],2),e("div",{staticClass:"bookDetails-bottom"},[t.bookshelf?e("div",{staticClass:"addBookshelf",on:{click:function(e){return t.delBookshelf(t.id,t.type)}}},[t._v(" 已加入书架 ")]):e("div",{staticClass:"addBookshelf",on:{click:function(e){return t.addBookshelf(t.id,t.type)}}},[t._v(" 加入书架 ")]),e("div",{staticClass:"read",on:{click:t.gotoBookContents}},[t._v("试读")])])]):t._e()},at=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"title"},[e("div",{staticClass:"title-txt"},[e("span"),t._v(" 评论 ")])])}],nt=(s(7550),{data(){return{bookId:null,bookTitle:null,bookDetail:null,bookCover:null,bookCategory:null,bookExtra:null,bookclicksCount:null,Retract:!1,bookAuthorizer:null,bookPaydesc:null,id:null,type:null,latestArticleTitle:null,firstChapterContentUuid:null,bookChapterIds:{},bookshelf:!1,comments:[],loading:!0}},mounted(){this.loading=!1},watch:{},methods:{formatDate(t){const e=new Date(t),s=e.getFullYear(),o=(e.getMonth()+1).toString().padStart(2,"0"),a=e.getDate().toString().padStart(2,"0");return`${s}年${o}月${a}日`},retract(){this.Retract=!this.Retract},gotoDirectory(t,e){console.log("gotoDirectory",t,e),this.$router.push({path:"/bookDetailsDirectory",query:{tocId:t,tocCover:e,tocname:this.bookDetail.feed.entry.author.name,docTitle:this.bookDetail.feed.entry.title}})},gotoBookContents(){if(this.bookChapterIds[this.id]&&this.bookChapterIds[this.id].length>0)this.content_uuid=this.bookChapterIds[this.id][0];else{if(!this.firstChapterContentUuid)return void console.error("第一章内容未找到 UUID.");this.content_uuid=this.firstChapterContentUuid}this.$router.push({path:"/BookContents",query:{source_uuid:this.bookId,content_uuid:this.content_uuid}})},addBookshelf(t,e){console.log("加入书架",t,e);let s=JSON.parse(localStorage.getItem("bookshelf"))||[];const o={id:t,type:e};console.log("加入书架",o);const a=s.some((t=>t.id===o.id&&t.type===o.type));a?console.log("这本书已经在书架上了"):(s.push(o),localStorage.setItem("bookshelf",JSON.stringify(s)),console.log("书架列表已更新",s),this.bookshelf=!0),this.bookChapterIds[t]||(this.bookChapterIds[t]=[]),this.bookChapterIds[t].includes(this.firstChapterContentUuid)||this.bookChapterIds[t].push(this.firstChapterContentUuid),localStorage.setItem("bookChapterIds",JSON.stringify(this.bookChapterIds))},delBookshelf(t,e){console.log("删除书籍",t,e);let s=JSON.parse(localStorage.getItem("bookshelf"))||[];const o=s.findIndex((s=>s.id===t&&s.type===e));-1!==o?(s.splice(o,1),localStorage.setItem("bookshelf",JSON.stringify(s)),console.log("书架列表已更新",s),this.bookshelf=!1):console.log("这本书不在书架上"),delete this.bookChapterIds[t],localStorage.setItem("bookChapterIds",JSON.stringify(this.bookChapterIds))}},created(){this.bookId=this.$route.query.id,this.bookTitle=this.$route.query.title,this.bookCover=this.$route.query.cover,this.bookExtra=this.$route.query.extra,g(this.bookId).then((t=>{console.log("评论数据",t.data.all.list),this.comments=t.data.all.list})),this.bookId&&(v(this.bookId).then((t=>{console.log(t.data.feed),this.bookDetail=t.data,this.bookCategory=t.data.feed.entry["pris:book"].category,this.bookclicksCount=t.data.feed.entry["pris:subscribe"].clicksCount,this.bookAuthorizer=t.data.feed.entry["pris:book"].authorizer,this.bookPaydesc=t.data.feed.entry["pris:book"].paydesc,this.id=t.data.feed.entry.id,console.log("id",this.id),this.type=t.data.feed.entry["pris:entry_status"].type,console.log("type",this.type);let e=JSON.parse(localStorage.getItem("bookshelf"))||[];console.log("书籍本地数据",e);const s=e.some((t=>t.id===this.id&&t.type===this.type));this.bookshelf=!!s})).catch((t=>{console.error("Error fetching book details:",t)})),p(this.bookId).then((t=>{console.log("112",t.data.item,this.bookId),this.latestArticleTitle=t.data.item.latestArticleTitle,console.log("latestArticleTitle",this.latestArticleTitle)})),m(this.bookId).then((t=>{t.data.ncx.navMap.navPoint&&(t.data.ncx.navMap.navPoint.navPoint&&Array.isArray(t.data.ncx.navMap.navPoint.navPoint)?this.firstChapterContentUuid=t.data.ncx.navMap.navPoint.navPoint[0].id:Array.isArray(t.data.ncx.navMap.navPoint)&&(this.firstChapterContentUuid=t.data.ncx.navMap.navPoint[0].id))})));const t=localStorage.getItem("bookChapterIds");t&&(this.bookChapterIds=JSON.parse(t))}}),it=nt,rt=(0,A.A)(it,ot,at,!1,null,"437b8b99",null),lt=rt.exports,ct={components:{bookDetails:lt},props:{catId:String},data(){return{ClassLfyBooks:[]}},computed:{},created:function(){},methods:{fetchClassLfyBooks(t){d(t).then((t=>{console.log("res123",t),this.ClassLfyBooks=t.data.list})).catch((t=>{console.error("提取书籍时出错:",t)}))},gotobookDetails(t,e,s,o){this.$router.push({path:"/bookDetails",query:{id:t,title:e,cover:s,extra:o}})}},watch:{catId:{handler(t){this.fetchClassLfyBooks(t)},immediate:!0}}},ht=ct,ut=(0,A.A)(ht,et,st,!1,null,"6812ad8c",null),dt=ut.exports,vt={components:{ClassLfyBook:dt},data(){return{ClassLfyTwo:[],namesArray:[],catId:null,currentUrl:null}},props:{channel:Object},created:function(){this.fetchData()},watch:{channel:{handler(t){this.fetchData(t)},deep:!0}},methods:{fetchData(t=this.channel){u().then((e=>{if(this.ClassLfyTwo=e.data,t&&(this.ClassLfyTwo=this.ClassLfyTwo.filter((e=>e.channel===t.channel))),this.namesArray=this.ClassLfyTwo.flatMap((t=>t.cates.map((t=>({name:t.name,url:t.url}))))),this.namesArray.length>0){const t=this.namesArray[0],e=t.url.match(/(?<=catId=)\d+/);this.catId=e?e[0]:null,this.currentUrl=t.url}}))},gotoClassLfyBook(t){console.log("原始url",t);const e=t.match(/(?<=catId=)\d+/);console.log("match",e),this.catId=e?e[0]:null,this.currentUrl=t,console.log("gotourl1111",this.catId)}}},pt=vt,mt=(0,A.A)(pt,Z,tt,!1,null,"126c1485",null),ft=mt.exports,gt={components:{ClassLfyTwo:ft},data(){return{ClassLfy:[],onchannel:null}},created:function(){u().then((t=>{this.ClassLfy=t.data,this.onchannel=this.ClassLfy.find((t=>"male"===t.channel))}))},methods:{ClassLfyNavClassify(t){this.onchannel=t}}},kt=gt,Ct=(0,A.A)(kt,Q,X,!1,null,"4126ab6c",null),bt=Ct.exports,yt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"Bookshelf"},[t._m(0),t.shelf.length>0?e("div",{staticClass:"addshelf"},t._l(t.shelf,(function(s){return e("div",{key:s.id,staticClass:"books"},[e("van-image",{staticClass:"img",attrs:{src:s.cover,alt:""},on:{click:function(e){return t.gotoBookContents(s.id)}}}),e("div",{staticClass:"btn"},[e("div",{staticClass:"bookstitle"},[t._v(t._s(s.title))]),e("van-icon",{staticClass:"ellipsis",attrs:{name:"ellipsis"},on:{click:t.showPopup}}),e("van-popup",{staticClass:"van-popup",style:{height:"10%"},attrs:{position:"bottom",round:""},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[e("div",{staticClass:"bookDetails",on:{click:function(e){return t.bookDetails(s.id,s.cover)}}},[t._v(" 详情 ")]),e("div",{staticClass:"deletebook",on:{click:function(e){return t.deletebook(s.id)}}},[t._v("删除")])])],1)],1)})),0):e("div",{staticClass:"empty"},[t._v("空空如也")])])},_t=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"title"},[e("div",{staticClass:"name"},[t._v("书架")])])}],wt={data(){return{shelf:[],show:!1}},methods:{showPopup(){this.show=!0},deletebook(t){let e=JSON.parse(localStorage.getItem("bookshelf"))||[];console.log("bookshelf",e);const s=e.findIndex((e=>e.id===t));console.log("bookIndex",s),-1!==s&&(e.splice(s,1),localStorage.setItem("bookshelf",JSON.stringify(e)),this.shelf=this.shelf.filter((e=>e.id!==t)))},bookDetails(t,e){this.$router.push({path:"/bookDetails",query:{id:t,cover:e}})},gotoBookContents(t){const e=JSON.parse(localStorage.getItem("bookChapterIds"))||{};console.log("bookChapterIds",e);let s=null;e[t]&&e[t].length>0&&(s=e[t][e[t].length-1]),s?this.$router.push({path:"/BookContents",query:{source_uuid:t,content_uuid:s}}):(console.log("当前书籍的章节ID不存在，跳转到第一章节"),m(t).then((e=>{let s=null;e.data.ncx.navMap.navPoint&&(e.data.ncx.navMap.navPoint.navPoint&&Array.isArray(e.data.ncx.navMap.navPoint.navPoint)?s=e.data.ncx.navMap.navPoint.navPoint[0].id:Array.isArray(e.data.ncx.navMap.navPoint)&&(s=e.data.ncx.navMap.navPoint[0].id)),s&&this.$router.push({path:"/BookContents",query:{source_uuid:t,content_uuid:s}})})))}},created(){const t=JSON.parse(localStorage.getItem("bookshelf"))||[],e=t.map((t=>({id:t.id,type:t.type})));k(e).then((t=>{this.shelf=t.data.data.list}))}},xt=wt,It=(0,A.A)(xt,yt,_t,!1,null,"3a5db86a",null),At=It.exports,St=function(){var t=this,e=t._self._c;return e("div",{staticClass:"ItsMine"},[t.isAuthenticated?e("div",{staticClass:"name"},[e("van-icon",{staticClass:"name-manager",attrs:{name:"manager-o",color:"grey"}}),e("div",{staticClass:"title"},[t._v(t._s(t.user.username))])],1):e("div",{staticClass:"avatar",on:{click:t.gotologin}},[e("van-icon",{staticClass:"contact",attrs:{name:"contact",color:"grey"}}),t._m(0)],1),e("div",{staticClass:"apply"},[t.isAuthenticated?e("div",{staticClass:"return-login",on:{click:t.logout}},[t._v(" 退出登录 ")]):t._e()])])},Nt=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"log"},[e("div",{staticClass:"login"},[t._v("点击登录")]),e("div",{staticClass:"text"},[t._v("登录即可免费阅读"),e("span",[t._v("5天")])])])}],Bt={data(){return{}},computed:{isAuthenticated(){return this.$store.getters.isAuthenticated},user(){return this.$store.getters.user}},methods:{gotologin(){this.$router.push({path:"/LoginRead"})},logout(){this.$store.dispatch("logout"),this.$router.push({path:"/"})}},created(){this.$store.dispatch("initializeStore")}},Pt=Bt,$t=(0,A.A)(Pt,St,Nt,!1,null,"d5164568",null),Lt=$t.exports,Dt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"bookDetailsDirectory"},[e("div",{staticClass:"bigtitle"},[e("div",{staticClass:"iconfont icon-fanhui",on:{click:function(e){return t.$router.go(-1)}}}),e("div",{staticClass:"title"},[e("van-image",{staticClass:"img",attrs:{src:t.tocCover,alt:""}}),e("div",{staticClass:"Directorytitle"},[e("div",{staticClass:"bookstitle"},[t._v(t._s(t.docTitle))]),e("div",{staticClass:"booksname"},[t._v(t._s(t.tocname))])])],1),e("div",{staticClass:"number"},[e("div",{staticClass:"num"},[t._v("共"+t._s(t.number)+"章")]),e("div",{staticClass:"positiveAndNegative",on:{click:t.positiveAndNegative}},[t.Negative?e("span",[t._v("正序")]):e("span",[t._v("倒序")])])])]),e("div",{staticClass:"DirectoryChapter"},[e("div",{staticClass:"chapter",style:{display:t.navLabel?"block":"none"}},[e("div",{staticClass:"bodywen"},[t._v(t._s(t.navLabel))])]),t._l(t.chaptername,(function(s,o){return e("div",{key:o,staticClass:"essay"},[e("div",{staticClass:"chaptername",on:{click:function(e){return t.gotoBookContents(t.tocId,s.id)}}},[t._v(" "+t._s(s.navLabel)+" ")])])}))],2)])},Tt=[],Mt={data(){return{tocId:null,id:null,tocCover:null,tocname:null,docTitle:null,number:null,navLabel:null,chaptername:[],Negative:!1}},created(){this.tocId=this.$route.query.tocId,this.tocCover=this.$route.query.tocCover,this.tocname=this.$route.query.tocname,this.docTitle=this.$route.query.docTitle,console.log("tocId",this.tocId,this.tocCover,this.tocname,this.docTitle),this.tocId&&m(this.tocId).then((t=>{console.log("章节",t.data.ncx),t.data.ncx.navMap.navPoint&&(Array.isArray(t.data.ncx.navMap.navPoint)?this.number=t.data.ncx.navMap.navPoint.length:t.data.ncx.navMap.navPoint.navPoint&&Array.isArray(t.data.ncx.navMap.navPoint.navPoint)&&(this.number=t.data.ncx.navMap.navPoint.navPoint.length)),t.data.ncx.navMap.navPoint&&(t.data.ncx.navMap.navPoint.navPoint&&Array.isArray(t.data.ncx.navMap.navPoint.navPoint)?(this.chaptername=t.data.ncx.navMap.navPoint.navPoint.map((t=>({...t,navLabel:t.navLabel.replace(/,/g,"")}))),console.log("带有嵌套 navPoint 的 chaptername",this.chaptername),this.id=this.chaptername.map((t=>t.id))):Array.isArray(t.data.ncx.navMap.navPoint)&&(this.chaptername=t.data.ncx.navMap.navPoint.map((t=>({...t,navLabel:t.navLabel.replace(/,/g,"")}))),console.log("没有嵌套 navPoint 的 chaptername",this.chaptername),this.id=this.chaptername.map((t=>t.id))));const e=t.data.ncx.navMap.navPoint.navLabel;e&&"string"===typeof e&&(this.navLabel=e.replace(/,/g,""))}))},methods:{gotoBookContents(t,e){this.$router.push({path:"/BookContents",query:{source_uuid:t,content_uuid:e}})},positiveAndNegative(){this.Negative=!this.Negative,this.sortChapters(),console.log("this.Negative",this.Negative)},sortChapters(){this.chaptername&&(this.Negative?(this.chaptername.sort(((t,e)=>e.index-t.index)),console.log("chaptername11",this.chaptername)):(this.chaptername.sort(((t,e)=>t.index-e.index)),console.log("chaptername22",this.chaptername)))}}},Ot=Mt,Ut=(0,A.A)(Ot,Dt,Tt,!1,null,"691abfd7",null),jt=Ut.exports,qt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"BookContentsnav",class:{"dark-theme":t.theme,"light-theme":!t.theme}},[e("div",{ref:"scrollContainer",staticClass:"BookContents-n",staticStyle:{height:"100vh","overflow-y":"auto"},on:{scroll:t.handleScroll,click:t.onshow}},[t.content?e("div",{staticClass:"BookContents",style:{paddingTop:t.show?"5px":"0"},domProps:{innerHTML:t._s(t.content)}}):t._e()]),t.show?e("div",{staticClass:"show",class:{"dark-mode":t.theme}},[e("div",{staticClass:"return iconfont icon-fanhui",on:{click:function(e){return t.$router.go(-1)}}})]):t._e(),t.show?e("div",{staticClass:"showtwo",class:{"dark-mode":t.theme}},[e("div",{staticClass:"btn"},[e("div",{staticClass:"top",on:{click:t.previousChapter}},[t._v("上一章")]),e("div",{staticClass:"buttom-setUp",on:{click:t.changeTheme}},[t.theme?e("div",{staticClass:"handoff-night iconfont icon-yueliang"},[e("p",[t._v("夜间")])]):e("div",{staticClass:"handoff-day iconfont icon-taiyang"},[e("p",[t._v("日间")])])]),e("div",{staticClass:"bottom",on:{click:t.NextChapter}},[t._v("下一章")])])]):t._e()])},Jt=[],zt={data(){return{source_uuid:null,content_uuid:null,content:null,id:null,chaptername:[],bookChapterIds:{},currentChapterIndex:null,show:!1,theme:!1}},created(){this.source_uuid=this.$route.query.source_uuid,this.content_uuid=this.$route.query.content_uuid;const t=localStorage.getItem("bookChapterIds");t&&(this.bookChapterIds=JSON.parse(t));const e=localStorage.getItem("currentChapterId");e&&(this.content_uuid=e),f(this.source_uuid,this.content_uuid).then((t=>{t&&t.data&&t.data.data?this.content=t.data.data.content:this.content="请开vip"})),m(this.source_uuid).then((t=>{t.data.ncx.navMap.navPoint&&(t.data.ncx.navMap.navPoint.navPoint&&Array.isArray(t.data.ncx.navMap.navPoint.navPoint)?(this.chaptername=t.data.ncx.navMap.navPoint.navPoint.map((t=>({...t,navLabel:t.navLabel.replace(/,/g,"")}))),this.id=this.chaptername.map((t=>t.id))):Array.isArray(t.data.ncx.navMap.navPoint)&&(this.chaptername=t.data.ncx.navMap.navPoint.map((t=>({...t,navLabel:t.navLabel.replace(/,/g,"")}))),this.id=this.chaptername.map((t=>t.id))));let e=null;this.bookChapterIds[this.source_uuid]&&this.bookChapterIds[this.source_uuid].length>0&&(e=this.bookChapterIds[this.source_uuid][this.bookChapterIds[this.source_uuid].length-1]),e&&(this.content_uuid=e),this.currentChapterIndex=this.chaptername.findIndex((t=>t.id===this.content_uuid)),-1===this.currentChapterIndex?console.log("在列表中找不到当前章节"):(console.log("当前章节索引：",this.currentChapterIndex),f(this.source_uuid,this.content_uuid).then((t=>{t&&t.data&&t.data.data?this.content=t.data.data.content:this.content="请开vip"})))}))},methods:{onshow(){this.show=!this.show,console.log(this.show)},changeTheme(){this.theme=!this.theme,console.log(this.theme)},handleScroll(t){const e=t.target,s=e.scrollTop,o=e.scrollHeight,a=e.clientHeight;0===s?this.previousChapter():s+a===o&&this.NextChapter()},NextChapter(){null!==this.currentChapterIndex&&this.currentChapterIndex<this.chaptername.length-1&&(this.currentChapterIndex++,this.loadChapter(this.currentChapterIndex),console.log("下一章",this.currentChapterIndex))},previousChapter(){null!==this.currentChapterIndex&&this.currentChapterIndex>0&&(this.currentChapterIndex--,this.loadChapter(this.currentChapterIndex),console.log("上一章",this.currentChapterIndex))},loadChapter(t){setTimeout((()=>{this.chaptername[t]&&this.chaptername[t].id&&f(this.source_uuid,this.chaptername[t].id).then((e=>{this.content=e.data.data.content,this.$nextTick((()=>{this.scrollToTop()})),this.currentChapterIndex=t,this.bookChapterIds[this.source_uuid]||(this.bookChapterIds[this.source_uuid]=[]),this.bookChapterIds[this.source_uuid].includes(this.chaptername[t].id)||this.bookChapterIds[this.source_uuid].push(this.chaptername[t].id),localStorage.setItem("bookChapterIds",JSON.stringify(this.bookChapterIds))}))}),300)},scrollToTop(){setTimeout((()=>{const t=this.$refs.scrollContainer;t&&(t.scrollTop=20)}),0)}}},Rt=zt,Et=(0,A.A)(Rt,qt,Jt,!1,null,"355a237d",null),Ft=Et.exports,Ht=function(){var t=this,e=t._self._c;return e("div",{staticClass:"LoginRead"},[e("div",{staticClass:"title"},[e("van-icon",{staticClass:"close",attrs:{name:"cross"},on:{click:function(e){return t.$router.go(-1)}}}),e("div",{staticClass:"title-login"},[t._v("登录")])],1),e("div",{staticClass:"login"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.username,expression:"username"}],attrs:{type:"number",placeholder:"账号"},domProps:{value:t.username},on:{input:function(e){e.target.composing||(t.username=e.target.value)}}}),e("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],attrs:{type:"password",placeholder:"密码"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}}),e("div",{staticClass:"login_btn",class:{active:t.isinput},on:{click:t.login}},[t._v(" 登录 ")]),e("div",{staticClass:"enrollforget"},[e("div",{staticClass:"enroll",on:{click:t.gotoEnrollAccount}},[t._v("注册账号")])])])])},Vt=[],Wt={data(){return{username:"",password:""}},computed:{isinput(){return this.username&&this.password}},methods:{loginVerification(){return R.A.clear(),this.username?!!this.password||(R.A.fail("请输入密码"),!1):(R.A.fail("请输入账号"),!1)},login(){if(!this.loginVerification())return;const t=JSON.parse(localStorage.getItem("users"))||[],e=t.find((t=>t.username===this.username));e?e.password===this.password?(R.A.success("登录成功！"),this.username="",this.password="",this.$store.dispatch("login",e),this.$router.push({path:"/"})):R.A.fail("密码错误"):R.A.fail("用户不存在")},gotoEnrollAccount(){this.$router.push({path:"/EnrollAccount"})}}},Yt=Wt,Gt=(0,A.A)(Yt,Ht,Vt,!1,null,"518d9d2e",null),Kt=Gt.exports,Qt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"EnrollAccount"},[e("div",{staticClass:"title"},[e("van-icon",{staticClass:"close",attrs:{name:"cross"},on:{click:function(e){return t.$router.go(-1)}}}),e("div",{staticClass:"title-enroll"},[t._v("注册")])],1),e("div",{staticClass:"enroll"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.username,expression:"username"}],attrs:{type:"number",placeholder:"账号"},domProps:{value:t.username},on:{input:function(e){e.target.composing||(t.username=e.target.value)}}}),e("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],attrs:{type:"password",placeholder:"密码"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}}),e("input",{directives:[{name:"model",rawName:"v-model",value:t.confirmpassword,expression:"confirmpassword"}],attrs:{type:"password",placeholder:"确认密码"},domProps:{value:t.confirmpassword},on:{input:function(e){e.target.composing||(t.confirmpassword=e.target.value)}}}),e("div",{staticClass:"enroll_btn",class:{active:t.isinput},on:{click:t.enroll}},[t._v(" 注册 ")])])])},Xt=[],Zt={data(){return{username:"",password:"",confirmpassword:""}},computed:{isinput(){return this.username&&this.password&&this.confirmpassword}},methods:{registrationVerification(){return R.A.clear(),this.username?this.password?this.password===this.confirmpassword||(R.A.fail("两次输入的密码不一致"),!1):(R.A.fail("请输入密码"),!1):(R.A.fail("请输入账号"),!1)},enroll(){if(!this.registrationVerification())return;const t={username:this.username,password:this.password};let e=JSON.parse(localStorage.getItem("users"))||[];e.some((e=>e.username===t.username))?R.A.fail("该账号已存在"):(e.push(t),localStorage.setItem("users",JSON.stringify(e)),R.A.success("注册成功！"),this.username="",this.password="",this.confirmpassword="",this.$router.push({path:"/LoginRead"}))}}},te=Zt,ee=(0,A.A)(te,Qt,Xt,!1,null,"4c52b776",null),se=ee.exports,oe=function(){var t=this,e=t._self._c;return e("div",{staticClass:"SearchBook"},[e("div",{staticClass:"SearchBooks"},[e("span",{staticClass:"iconfont icon-sousuo"}),e("input",{directives:[{name:"model",rawName:"v-model",value:t.searchs,expression:"searchs"}],attrs:{type:"text",autofocus:""},domProps:{value:t.searchs},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.enter.apply(null,arguments)},input:[function(e){e.target.composing||(t.searchs=e.target.value)},t.Stabilization]}}),e("div",{on:{click:function(e){return t.$router.go(-1)}}},[t._v("取消")])]),t.books.length>0?e("div",{staticClass:"outcome"},t._l(t.books,(function(s){return e("div",{key:s.id,staticClass:"books",on:{click:function(e){return t.gotobookDetails(s.sourceUuid,s.iconUrl)}}},[e("img",{directives:[{name:"lazy",rawName:"v-lazy",value:s.iconUrl,expression:"book.iconUrl"}],attrs:{alt:""}}),e("div",{staticClass:"title-author"},[e("div",{staticClass:"title"},[t._v(t._s(s.title))]),e("div",{staticClass:"author"},[t._v(t._s(`${s.category}/${s.author}`))]),e("div",{staticClass:"text",domProps:{innerHTML:t._s(s.description)}})])])})),0):t._e()])},ae=[],ne=s(896),ie=s.n(ne),re={data(){return{searchs:"",books:[]}},created(){this.Stabilization=ie()(this.enter,300)},methods:{enter(){const t=this.searchs.trim();""!==t?C(this.searchs).then((t=>{console.log(t.data.data),this.books=t.data.data.books})):this.books=[]},gotobookDetails(t,e){this.$router.push({path:"/bookDetails",query:{id:t,cover:e}})}}},le=re,ce=(0,A.A)(le,oe,ae,!1,null,"225b2b13",null),he=ce.exports;o.Ay.use($.Ay);const ue=[{path:"/",name:"BookStore",component:K,meta:{keepAlive:!0}},{path:"/ClassLfy",name:"ClassLfy",component:bt,meta:{keepAlive:!0}},{path:"/BookShelf",name:"BookShelf",component:At,meta:{keepAlive:!0}},{path:"/ItsMine",name:"ItsMine",component:Lt,meta:{keepAlive:!0}},{path:"/bookDetails",name:"bookDetails",component:lt,meta:{detail:!0}},{path:"/bookDetailsDirectory",name:"bookDetailsDirectory",component:jt},{path:"/BookContents",name:"BookContents",component:Ft},{path:"/LoginRead",name:"LoginRead",component:Kt},{path:"/EnrollAccount",name:"EnrollAccount",component:se},{path:"/SearchBook",name:"SearchBook",component:he}],de=new $.Ay({routes:ue});var ve=de,pe=s(7082),me=s(1281),fe=s(7304);s(2241);o.Ay.use(pe.Ay),o.Ay.use(fe.A),o.Ay.use(me.A,{lazyComponent:!0}),o.Ay.config.productionTip=!1,new o.Ay({store:P,router:ve,created(){this.$store.dispatch("initializeStore")},render:t=>t(N)}).$mount("#app")}},e={};function s(o){var a=e[o];if(void 0!==a)return a.exports;var n=e[o]={exports:{}};return t[o].call(n.exports,n,n.exports,s),n.exports}s.m=t,function(){var t=[];s.O=function(e,o,a,n){if(!o){var i=1/0;for(h=0;h<t.length;h++){o=t[h][0],a=t[h][1],n=t[h][2];for(var r=!0,l=0;l<o.length;l++)(!1&n||i>=n)&&Object.keys(s.O).every((function(t){return s.O[t](o[l])}))?o.splice(l--,1):(r=!1,n<i&&(i=n));if(r){t.splice(h--,1);var c=a();void 0!==c&&(e=c)}}return e}n=n||0;for(var h=t.length;h>0&&t[h-1][2]>n;h--)t[h]=t[h-1];t[h]=[o,a,n]}}(),function(){s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,{a:e}),e}}(),function(){s.d=function(t,e){for(var o in e)s.o(e,o)&&!s.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={524:0};s.O.j=function(e){return 0===t[e]};var e=function(e,o){var a,n,i=o[0],r=o[1],l=o[2],c=0;if(i.some((function(e){return 0!==t[e]}))){for(a in r)s.o(r,a)&&(s.m[a]=r[a]);if(l)var h=l(s)}for(e&&e(o);c<i.length;c++)n=i[c],s.o(t,n)&&t[n]&&t[n][0](),t[n]=0;return s.O(h)},o=self["webpackChunkread_the_novel"]=self["webpackChunkread_the_novel"]||[];o.forEach(e.bind(null,0)),o.push=e.bind(null,o.push.bind(o))}();var o=s.O(void 0,[504],(function(){return s(6487)}));o=s.O(o)})();
//# sourceMappingURL=app.f423dccb.js.map