(function(){"use strict";var t={617:function(t,s,n){n(8992),n(4520);var i=n(6848),e=n(788),a=n.n(e);let r={baseURL:"https://apis.netstart.cn/music"};const o=a().create(r);o.interceptors.request.use((function(t){return t}),(function(t){return Promise.reject(t)})),o.interceptors.response.use((function(t){return t}),(function(t){return Promise.reject(t)})),Plugin.install=function(t){t.axios=o,window.axios=o,Object.defineProperties(t.prototype,{axios:{get(){return o}},$axios:{get(){return o}}})},i.Ay.use(Plugin);var l=function(){var t=this,s=t._self._c;return s("div",{attrs:{id:"app"}},[t.$route.meta.shownav?s("nav",[s("router-link",{attrs:{to:"/"}},[t._v("推荐音乐")]),s("router-link",{attrs:{to:"/hotSongCharts"}},[t._v("热歌榜")]),s("router-link",{attrs:{to:"/Search"}},[t._v("搜索")])],1):t._e(),s("router-view",{attrs:{currentid:t.song?t.song.id:null,playing:t.playing,duration:t.duration,playedSongs:t.playedSongs,currentTime:t.currentTime},on:{"plays-music":t.playsong,"change-play-time":function(s){t.$refs.audioEle.currentTime=s},"start-play-song":function(s){return t.startPlaying()},"pause-play-song":function(s){return t.pausePlaying()},"prev-song":t.prevSong,"next-song":t.nextSong,"Delete-music":t.Deletemusic}}),t.song?s("audio",{ref:"audioEle",attrs:{controls:"",src:`https://music.163.com/song/media/outer/url?id=${t.song.id}.mp3`,autoplay:""},on:{play:function(s){t.playing=!0},pause:function(s){t.playing=!1},durationchange:function(s){t.duration=s.target.duration},timeupdate:function(s){t.currentTime=s.target.currentTime},ended:t.nextSong}}):t._e(),t.song&&t.showPlayMusic?s("PlayMusic",{attrs:{song:t.song,currentid:t.song?t.song.id:null,playing:t.playing,playedSongs:t.playedSongs},on:{"plays-music":function(s){return t.playsong(s)},"start-play-song":function(s){return t.startPlaying()},"pause-play-song":function(s){return t.pausePlaying()},"prev-song":t.prevSong,"next-song":t.nextSong,"Delete-music":t.Deletemusic}}):t._e()],1)},c=[],u=(n(4114),n(7550),function(){var t=this,s=t._self._c;return s("div",{staticClass:"bottom-musicBars"},[s("div",{staticClass:"bottom-music-bg"},[s("div",{staticClass:"bottom-music-box",on:{click:t.goToSongDetails}},[s("div",{staticClass:"image",attrs:{playedSongs:t.playedSongs,currentid:t.currentid},on:{"plays-music":function(s){return t.$emit("plays-music",s)},"Delete-music":function(s){return t.$emit("Delete-music",s)}}},[t.song&&(t.song.song||t.song.al)?s("img",{class:{playing:t.playing},attrs:{src:t.song.song?t.song.picUrl:t.song.al.picUrl,alt:""}}):t._e()]),s("h4",{staticStyle:{width:"45vw","white-space":"nowrap",overflow:"hidden","text-overflow":"ellipsis"}},[t._v(" "+t._s(t.song.name)+" ")])]),s("div",{staticClass:"bottom-btn-box"},[s("div",{staticClass:"previousOne",on:{click:function(s){return t.$emit("prev-song")}}},[t._v("l◀")]),t.playing?s("div",{staticClass:"begin",on:{click:function(s){return s.stopPropagation(),t.$emit("pause-play-song")}}},[s("span"),s("span")]):s("div",{staticClass:"timeOut",on:{click:function(s){return s.stopPropagation(),t.$emit("start-play-song")}}},[t._v(" ▶ ")]),s("div",{staticClass:"nextOne",on:{click:function(s){return t.$emit("next-song")}}},[t._v("▶l")]),s("div",{staticClass:"column",on:{click:function(s){return s.stopPropagation(),t.listItems.apply(null,arguments)}}},[s("span"),s("span"),s("span")])])]),s("ListItem",{directives:[{name:"show",rawName:"v-show",value:t.column,expression:"column"}],attrs:{playedSongs:t.playedSongs,currentid:t.song?t.song.id:null},on:{"plays-music":function(s){return t.$emit("plays-music",s)},"Delete-music":function(s){return t.$emit("Delete-music",s)}}})],1)}),d=[],p=function(){var t=this,s=t._self._c;return s("div",{directives:[{name:"show",rawName:"v-show",value:t.ListItem,expression:"ListItem"}],staticClass:"ListItem-container",on:{click:function(s){return s.stopPropagation(),t.overlay.apply(null,arguments)}}},[s("div",{staticClass:"ListItem"},[s("div",{staticClass:"ListItem-title"},[t._v(" 当前播放 "),s("div",{staticClass:"num"},[t._v(t._s(t.playedSongs.length))])]),s("ul",t._l(t.playedSongs,(function(n,i){return s("li",{key:i,class:{"text-song":n.id===t.currentid},on:{click:function(s){return t.playsMusic(n)}}},[s("div",{staticClass:"singerSongs"},[t._v(" "+t._s(n.name)+" - "+t._s(t.getArtists(n))+" ")]),s("div",{staticClass:"line",on:{click:function(s){return s.stopPropagation(),t.Deletemusic(n.id)}}},[t._v("X")])])})),0)]),s("div",{staticClass:"overlay",on:{click:function(s){return s.stopPropagation(),t.overlay.apply(null,arguments)}}})])},g=[],m=(n(1454),{props:{playedSongs:{type:Array,default:()=>[]},currentid:{type:Number},playing:{type:Boolean}},data(){return{ListItem:!0}},methods:{overlay(){this.ListItem=!this.ListItem},getArtists(t){const s=t.ar||t.artists||t.song?.ar||t.song?.artists;return s&&Array.isArray(s)?s.map((t=>t.name)).join("/"):(console.error("无效的 song 对象或 artists 数组：",t),"未知歌手")},playsMusic(t){this.$emit("plays-music",t)},Deletemusic(t){this.$emit("Delete-music",t)}}}),h=m,y=n(1656),v=(0,y.A)(h,p,g,!1,null,"7447795a",null),f=v.exports,S={components:{ListItem:f},props:{song:{type:[String,Object,Number],default:null},playing:{type:Boolean},playedSongs:{type:Array,default:()=>[]},currentid:{type:Number}},data:function(){return{column:!1}},methods:{goToSongDetails(){this.$router.push({path:"/SongDetails",name:"SongDetails",query:{id:this.song.id}})},listItems(){this.column=!this.column}},mounted(){}},_=S,C=(0,y.A)(_,u,d,!1,null,"0dc00771",null),x=C.exports,w={components:{PlayMusic:x},data:function(){return{song:null,playing:!1,currentid:null,duration:0,currentTime:0,showPlayMusic:!0,playedSongs:[],currentIndex:-1}},watch:{"$route.path":{immediate:!0,handler(t){this.showPlayMusic="/SongDetails"!==t,this.showPlayMusic&&this.$refs.audioEle&&this.$refs.audioEle.load()}}},computed:{audioSrc(){return this.song&&this.song?.id?`https://music.163.com/song/media/outer/url?id=${this.song?.id}.mp3`:""},newSoundMarginBottom(){return this.audioSrc?"70px":"0"}},methods:{startPlaying(){this.$refs.audioEle?(console.log(this.$refs.audioEle),this.$refs.audioEle.play()):console.error("audioEle 未定义")},pausePlaying(){this.$refs.audioEle?(console.log(this.$refs.audioEle),this.$refs.audioEle.pause()):console.error("audioEle 未定义")},playsong(t){console.log(`使用 id 播放歌曲: ${t?.id}`),this.song=t,this.currentid=t?t?.id:null,this.saveSongToPlayedList(t),-1!==this.currentIndex&&this.playedSongs[this.currentIndex]?.id===t?.id||this.updateCurrentIndex(t?.id)},saveSongToPlayedList(t){const s=this.playedSongs.some((s=>s?.id===t?.id));s||(this.playedSongs.push(t),localStorage.setItem("playedSongs",JSON.stringify(this.playedSongs)))},loadPlayedSongs(){const t=localStorage.getItem("playedSongs");t&&(this.playedSongs=JSON.parse(t))},updateCurrentIndex(t){const s=this.playedSongs.findIndex((s=>s?.id===t));console.log(`查找 songId 的索引 ${t}:`,s),-1!==s?(this.currentIndex=s,localStorage.setItem("currentIndex",JSON.stringify(this.currentIndex)),console.log(`currentIndex 更新为: ${this.currentIndex}`)):console.log(`id 为 ${t} 在 playedSongs 中找不到`)},prevSong(){const t=this.playedSongs.findIndex((t=>t?.id===this.currentid));if(t>0){const s=this.playedSongs[t-1];this.playsong(s)}},nextSong(){const t=this.playedSongs.findIndex((t=>t?.id===this.currentid));if(t<this.playedSongs.length-1){const s=this.playedSongs[t+1];this.playsong(s)}else{const t=this.playedSongs[0];this.playsong(t)}},Deletemusic(t){if(console.log("删除：",t),this.playedSongs=this.playedSongs.filter((s=>s?.id!==t)),localStorage.setItem("playedSongs",JSON.stringify(this.playedSongs)),this.currentid===t)if(this.$refs.audioEle.pause(),this.playing=!1,this.song=null,this.currentid=null,this.playedSongs.length>0)if(this.currentIndex=Math.max(0,this.currentIndex-1),this.currentIndex<this.playedSongs.length-1){const t=this.playedSongs[this.currentIndex+1];this.playsong(t)}else{const t=this.playedSongs[0];this.playsong(t)}else this.stopPlaying()},stopPlaying(){this.$refs.audioEle.pause(),this.playing=!1,this.song=null,this.currentid=null}},mounted(){if(this.playedSongs.length>0&&-1!==this.currentIndex)this.playsong(this.playedSongs[this.currentIndex]);else if(this.playedSongs.length>0){const t=this.playedSongs[0];t&&(this.currentid=t?.id,this.playsong(t))}},created(){this.loadPlayedSongs(),console.log("playedSongs 加载：",this.playedSongs);const t=localStorage.getItem("currentIndex");console.log("storedIndex 来自 localStorage:",t),t?(this.currentIndex=JSON.parse(t),console.log("currentIndex 设置为：",this.currentIndex)):(console.log("在 localStorage 中找不到 currentIndex，设置为 -1"),this.currentIndex=-1);const s=this.$route.query.id;if(s)this.song={id:s},this.currentid=s;else if(this.playedSongs.length>0&&-1!==this.currentIndex)this.playsong(this.playedSongs[this.currentIndex]);else if(this.playedSongs.length>0){const t=this.playedSongs[0];t&&(this.currentid=t.id,this.playsong(t))}}},b=w,$=(0,y.A)(b,l,c,!1,null,"27a2b2da",null),I=$.exports,k=n(6178),T=function(){var t=this,s=t._self._c;return s("div",{staticClass:"Recommend"},[s("h4",[t._v("编辑推荐")]),s("ul",{staticClass:"TuYinItem"},t._l(t.TuYinItem,(function(t){return s("TuYinItem",{key:t.id,attrs:{item:t,col:3}})})),1),s("h4",[t._v("最新音乐")]),s("ul",{staticClass:"New-Sound",style:{"margin-bottom":t.$parent.newSoundMarginBottom}},t._l(t.newsong,(function(n){return s("NewSound",{key:n.id,attrs:{item:n,currentid:t.currentid,playing:t.playing},on:{"plays-music":function(s){return t.$emit("plays-music",s)}}})})),1)])},P=[],L=function(){var t=this,s=t._self._c;return s("li",{staticClass:"playlist-tuyin",class:{col3:3===t.col,col2:2===t.col}},[s("router-link",{attrs:{to:`/tuyintwo?id=${t.item.id}`}},[s("div",{staticClass:"tuyin-box"},[s("div",{staticClass:"image"},[s("img",{attrs:{src:`${t.item.picUrl}?imageView=1&type=webp&thumbnail=246x0`,alt:""}})]),s("span",{staticClass:"num"},[t._v(t._s(t.formattedPlayCount))])]),s("div",{staticClass:"txt"},[t._v(t._s(t.item.name))])]),s("router-view")],1)},A=[],N={props:{item:Object,picUrl:String,col:Number},methods:{},computed:{formattedPlayCount(){return(this.item.playCount/1e4).toFixed(1)+"万"}}},M=N,O=(0,y.A)(M,L,A,!1,null,"4e2149e3",null),D=O.exports,E=function(){var t=this,s=t._self._c;return s("li",{staticClass:"new-sound",class:{"text-song":t.currentid===t.item.id},on:{click:function(s){return t.playsMusic(t.item)}}},[s("div",{staticClass:"nbox"},[s("div",{staticClass:"songTitle"},[t._v(t._s(t.item.name))]),s("div",{staticClass:"singer"},[t._v(t._s(t.singersName))])]),s("div",{staticClass:"play-btn"},[t.currentid!==t.item.id?s("div",{staticClass:"iconfont"},[t._v(" ▶")]):s("div",{staticClass:"icon",class:{playing:t.playing}},[s("span"),s("span"),s("span"),s("span")])])])},j=[],H={props:{currentid:Number,item:Object,playing:Boolean},computed:{singersName(){if(!this.item.song||!this.item.song.artists)return"";const t=this.item.song.artists.map((t=>t.name)),s=this.item.song.album?this.item.song.album.name:"未知专辑";return`${t.join("/")} - ${s}`}},methods:{playsMusic(t){this.$emit("plays-music",t)}}},Y=H,B=(0,y.A)(Y,E,j,!1,null,"b1405db0",null),U=B.exports,V={props:["currentid","playing"],components:{TuYinItem:D,NewSound:U},data:function(){return{TuYinItem:[],newsong:[]}},created:function(){this.axios.get("/personalized").then((t=>{const s=t.data.result.slice(0,6);this.TuYinItem=s})),this.axios.get("/personalized/newsong").then((t=>{this.newsong=t.data.result}))},computed:{},methods:{}},q=V,F=(0,y.A)(q,T,P,!1,null,"a4259daa",null),J=F.exports,R=function(){var t=this,s=t._self._c;return s("div",{staticClass:"HotSongCharts",style:{"margin-bottom":t.$parent.newSoundMarginBottom}},t._l(t.HotSongCharts,(function(n,i){return s("div",{key:n.id,staticClass:"HotSongCharts-box",class:{"text-song":n.id===t.currentid},on:{click:function(s){return t.playsMusic(n)}}},[s("div",{class:["num",{three:i<3}]},[t._v(t._s(t.number(i+1)))]),s("div",{staticClass:"HotSongCharts-lf"},[s("div",{staticClass:"HotSongCharts-title"},[t._v(t._s(n.name))]),s("div",{staticClass:"HotSongCharts-singer"},[t._v(t._s(t.arname(n)))])]),s("div",{staticClass:"play-btn"},[t.currentid!==n.id?s("div",{staticClass:"iconfont"},[t._v("  ▶")]):s("div",{staticClass:"icon",class:{playing:t.playing}},[s("span"),s("span"),s("span"),s("span")])])])})),0)},z=[],W={props:["currentid","playing"],data:function(){return{HotSongCharts:[]}},computed:{arname(){return t=>{if(!t.ar)return"未知歌手 - 未知歌曲";const s=Array.isArray(t.ar)?t.ar.map((t=>t.name)).join("/"):t.ar.name,n=t.name||"未知歌曲";return`${s} - ${n}`}}},methods:{number(t){return t.toString().padStart(2,"0")},playsMusic(t){this.$emit("plays-music",t)}},created:function(){this.axios.get("/playlist/detail?id=3778678").then((t=>{this.HotSongCharts=t.data.playlist.tracks}))}},X=W,G=(0,y.A)(X,R,z,!1,null,"08e6e38f",null),K=G.exports,Q=function(){var t=this,s=t._self._c;return s("div",{staticClass:"Search"},[s("div",{staticClass:"ss"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.search,expression:"search"}],staticClass:"text",attrs:{type:"text",placeholder:"输入歌曲或歌手名字"},domProps:{value:t.search},on:{keydown:function(s){return!s.type.indexOf("key")&&t._k(s.keyCode,"enter",13,s.key,"Enter")?null:t.enter.apply(null,arguments)},input:[function(s){s.target.composing||(t.search=s.target.value)},t.debouncedSear]}}),s("div",{directives:[{name:"show",rawName:"v-show",value:t.load,expression:"load"}],staticClass:"load",staticStyle:{color:"orange"}},[t._v("加载中...")])]),s("div",{staticClass:"list",style:{"margin-bottom":t.$parent.newSoundMarginBottom}},[t.suggestions?s("div",t._l(t.suggestions,(function(n){return s("div",{key:n.keyword},[s("p",{staticClass:"tisp-outcome",on:{click:function(s){return t.inp(n.keyword)}}},[t._v(" "+t._s(n.keyword)+" ")])])})),0):""!==t.search.trim()?s("div",{staticClass:"tisp-outcome"},[t._v(" 找不到相关搜索 ")]):t._e(),t.formattedResult?s("div",t._l(t.formattedResult,(function(n){return s("div",{key:n.id,staticClass:"tisp-outcome",class:{"text-song":n.id===t.currentid},on:{click:function(s){return t.playsMusic(n)}}},[s("div",{staticClass:"song-name"},[s("h4",[t._v(t._s(n.name))]),s("p",{staticClass:"outcome-p"},[t._v("歌手："+t._s(n.artistsNames))])]),s("div",{staticClass:"play-btn"},[t.currentid!==n.id?s("div",{staticClass:"iconfont"},[t._v(" ▶")]):s("div",{staticClass:"icon",class:{playing:t.playing}},[s("span"),s("span"),s("span"),s("span")])])])})),0):""!==t.search.trim()?s("div",{staticClass:"tisp-outcome"},[t._v(" 找不到相关搜索 ")]):t._e()])])},Z=[],tt=n(896),st=n.n(tt),nt={props:["currentid","playing"],data(){return{search:"",load:!1,result:[],suggestions:[],previousSearch:""}},computed:{formattedResult(){return this.result.map((t=>({...t,artistsNames:t.artists.map((t=>t.name)).join(" / ")})))}},methods:{inp(t){this.search=t,this.enter()},sear(){if(""===this.search.trim())return this.suggestions=[],this.result=[],void console.log("清空结果",this.suggestions=[],this.result=[]);this.search.length<this.previousSearch.length&&this.previousSearch.startsWith(this.search)&&(this.result=[]),this.previousSearch=this.search,this.load=!0,this.axios.get("/search/suggest",{params:{keywords:this.search,type:"mobile"}}).then((t=>{this.search&&(this.suggestions=t.data.result.allMatch)})).catch((t=>{console.error("Error:",t),this.suggestions=[]})).finally((()=>{this.load=!1,this.result=[]}))},enter(){""===this.search.trim()||this.search.match(/^ *$/)||(this.song(this.search),this.suggestions=[],console.log("搜索结果",this.suggestions=[]))},song(t){this.load=!0,this.axios.get("/search",{params:{keywords:t}}).then((t=>{console.log("222",t.data.result.songs),this.result=t.data.result.songs,this.suggestions=[]})).catch((t=>{console.error("Error:",t),this.suggestions=[]})).finally((()=>{this.load=!1,this.suggestions=[]}))},playsMusic(t){this.$emit("plays-music",t),this.suggestions=[]}},created(){this.debouncedSear=st()(this.sear,300)},debouncedSear(){""===this.search.trim()||this.search.match(/^ *$/)?(this.suggestions=[],this.result=[]):this.sear()}},it=nt,et=(0,y.A)(it,Q,Z,!1,null,"b9d2246e",null),at=et.exports,rt=function(){var t=this,s=t._self._c;return t.playlist?s("div",{staticClass:"TuYinTwo",style:{"margin-bottom":t.$parent.newSoundMarginBottom}},[s("div",{staticClass:"return",on:{click:t.gotorecommend}}),s("div",{staticClass:"tuYinTwo-title"},[s("div",{staticClass:"image"},[s("img",{attrs:{src:`${t.playlist.coverImgUrl}?imageView=1&type=webp&thumbnail=252x0`,alt:""}})]),s("div",{staticClass:"TuYinTwo-text"},[s("div",{staticClass:"text"},[t._v(t._s(t.playlist.name))])])]),s("div",{staticClass:"min-tit"},[t._v("歌曲列表")]),t._l(t.playlist.tracks,(function(n,i){return s("div",{key:n.id,staticClass:"num-list",class:{"text-song":n.id===t.currentid},on:{click:function(s){return t.playsMusic(n)}}},[s("div",{staticClass:"num"},[t._v(t._s(t.number(i+1)))]),s("div",{staticClass:"tuYinTwo-lf"},[s("div",{staticClass:"tuYinTwo-song"},[t._v(t._s(n.name))]),s("div",{staticClass:"tuYinTwo-singer"},[t._v(t._s(t.arname(n)))])]),s("div",{staticClass:"play-btn"},[t.currentid!==n.id?s("div",{staticClass:"iconfont"},[t._v(" ▶")]):s("div",{staticClass:"icon",class:{playing:t.playing}},[s("span"),s("span"),s("span"),s("span")])])])}))],2):t._e()},ot=[],lt={props:["currentid","playing"],data:function(){return{playlist:null}},created:function(){this.$route.query.id&&this.axios.get("playlist/detail",{params:{id:this.$route.query.id}}).then((t=>{console.log(t.data),this.playlist=t.data.playlist}))},computed:{arname(){return t=>{if(!t.ar)return"未知歌手 - 未知歌曲";const s=Array.isArray(t.ar)?t.ar.map((t=>t.name)).join("/"):t.ar.name,n=t.name||"未知歌曲";return`${s} - ${n}`}}},methods:{number(t){return t.toString().padStart(2,"0")},gotorecommend(){this.$router.push({path:"/"})},playsMusic(t){this.$emit("plays-music",t)}}},ct=lt,ut=(0,y.A)(ct,rt,ot,!1,null,"1dafb4f6",null),dt=ut.exports,pt=function(){var t=this,s=t._self._c;return t.song?s("div",{staticClass:"SongDetails",style:{backgroundImage:`url(${t.song.song?t.song.picUrl:t.song.al.picUrl})`}},[s("div",{staticClass:"box"},[s("div",{staticClass:"return",on:{click:t.gotorecommend}}),t.showLyric?s("SongLyric",{attrs:{currentTime:t.currentTime,duration:t.duration,playing:t.playing},on:{"hide-lyric":t.hideLyric}}):s("div",{staticClass:"image-songTitle",on:{click:t.gotoSongLyric}},[s("div",{staticClass:"image"},[s("img",{class:{playing:t.playing},attrs:{src:t.song.song?t.song.picUrl:t.song.al.picUrl,alt:""}})]),s("div",{staticClass:"songTitle"},[s("div",{staticClass:"songTitle-lf"},[s("div",{staticClass:"songName"},[t._v(t._s(t.song.name))]),s("div",{staticClass:"songwriter"},[t._v(" "+t._s(t.song.ar.map((t=>t.name)).join("/"))+" ")])]),s("div",{staticClass:"songTitle-lr"})])]),s("div",{staticClass:"song-time"},[s("div",{staticClass:"progress"},[s("div",{staticClass:"mask",style:{width:t.userValue/t.duration*100+"%"}}),s("input",{directives:[{name:"model",rawName:"v-model.number",value:t.userValue,expression:"userValue",modifiers:{number:!0}}],attrs:{type:"range",min:"0",max:t.duration},domProps:{value:t.userValue},on:{input:function(s){t.inputing=!0},change:function(s){t.inputing=!1,t.$emit("change-play-time",t.userValue)},__r:function(s){t.userValue=t._n(s.target.value)},blur:function(s){return t.$forceUpdate()}}})]),s("div",{staticClass:"num"},[s("span",[t.currentTime?t._e():s("span",[t._v("00:00")]),t._v(t._s(t._f("time2mmss")(t.currentTime)))]),s("span",[t._v(t._s(t._f("time2mmss")(t.duration)))])])]),s("div",{staticClass:"bottom-btn-box"},[s("div",{staticClass:"bottom-btn-bf"},[s("div",{staticClass:"previousOne",on:{click:function(s){return t.$emit("prev-song")}}},[t._v("l◀")]),t.playing?s("div",{staticClass:"begin",on:{click:function(s){return s.stopPropagation(),t.$emit("pause-play-song")}}},[s("span"),s("span")]):s("div",{staticClass:"timeOut",on:{click:function(s){return s.stopPropagation(),t.$emit("start-play-song")}}},[t._v(" ▶ ")]),s("div",{staticClass:"nextOne",on:{click:function(s){return t.$emit("next-song")}}},[t._v("▶l")]),s("div",{staticClass:"column",on:{click:t.listItems}},[s("span"),s("span"),s("span")])]),s("ListItem",{directives:[{name:"show",rawName:"v-show",value:t.column,expression:"column"}],attrs:{playedSongs:t.playedSongs,currentid:t.currentid},on:{"plays-music":function(s){return t.$emit("plays-music",s)},"Delete-music":function(s){return t.$emit("Delete-music",s)}}})],1)],1)]):t._e()},gt=[],mt=function(){var t=this,s=t._self._c;return s("div",{staticClass:"SongLyric",class:{playing:t.playing},on:{click:function(s){return t.$emit("hide-lyric")}}},[s("ul",{staticClass:"list",style:t.lyricMarginTop},t._l(t.parsedLyric,(function(n,i){return s("li",{key:i,ref:"lyricElements",refInFor:!0,class:{active:i===t.currentLyricIndex}},[s("span",{style:t.lyricAnimationDuration(i,n)},[t._v(t._s(n.text))])])})),0)])},ht=[],yt=(n(8872),{props:{currentTime:Number,duration:Number,playing:Boolean},data:function(){return{lyric:"",lyricElementsHeight:[]}},created:function(){this.axios.get("/lyric",{params:{id:this.$route.query.id}}).then((t=>{this.lyric=t.data.lrc.lyric,this.$nextTick((()=>{this.lyricElementsHeight=this.$refs.lyricElements.map((t=>t.offsetHeight))}))}))},computed:{currentLyricIndex:function(){return this.parsedLyric.findLastIndex((t=>t.time<=this.currentTime))},parsedLyric:function(){return this.lyric.split("\n").filter((t=>t)).map((t=>{var s=t.match(/\[(?<m>\d{2}):(?<s>\d{2}\.\d{2,3})\](?<str>.*)/i);return{time:60*s.groups.m+parseFloat(s.groups.s),text:s.groups.str||"---"}}))},lyricMarginTop:function(){const t=-1*this.lyricElementsHeight.slice(0,this.currentLyricIndex).reduce(((t,s)=>t+s),0)+200+"px";return{marginTop:t}}},methods:{lyricAnimationDuration(t,s){const n=this.parsedLyric[t+1]?.time||this.duration,i=.89*(n-s.time)+"s";return{animationDuration:i}}}}),vt=yt,ft=(0,y.A)(vt,mt,ht,!1,null,"002906be",null),St=ft.exports,_t={components:{SongLyric:St,ListItem:f},props:{playing:{type:Boolean},currentTime:Number,duration:Number,currentid:Number,playedSongs:{type:Array,default:()=>[]}},data:function(){return{song:null,userValue:this.currentTime,inputing:!1,showLyric:!1,column:!1}},created:function(){this.axios.get("/song/detail",{params:{ids:this.$route.query.id}}).then((t=>{this.song=t.data.songs[0]})).catch((t=>{console.error("111加载歌曲详细信息时出错:",t)}))},watch:{currentTime:function(t){this.inputing||(this.userValue=t)},currentid:function(t,s){t!==s&&this.currentid&&this.axios.get("/song/detail",{params:{ids:this.currentid}}).then((t=>{this.song=t.data.songs[0]})).catch((t=>{console.error("加载歌曲详细信息时出错:",t)}))}},methods:{gotorecommend(){this.$router.push({path:"/"})},gotoSongLyric(){this.showLyric=!this.showLyric},hideLyric(){this.showLyric=!1},listItems(){this.column=!this.column}},computed:{}},Ct=_t,xt=(0,y.A)(Ct,pt,gt,!1,null,"13892c41",null),wt=xt.exports;i.Ay.use(k.Ay);const bt=[{path:"/",name:"recommend",component:J,meta:{shownav:!0}},{path:"/hotSongCharts",name:"hotSongCharts",component:K,meta:{shownav:!0}},{path:"/Search",name:"Search",component:at,meta:{shownav:!0}},{path:"/tuyintwo",name:"tuyintwo",component:dt},{path:"/SongDetails",name:"SongDetails",component:wt}],$t=new k.Ay({routes:bt});var It=$t;i.Ay.config.productionTip=!1,i.Ay.filter("time2mmss",(function(t){return t?`${String(Math.floor(t/60)).padStart(2,"0")}:${String((t%60).toFixed(0)).padStart(2,"0")}`:""})),new i.Ay({router:It,render:t=>t(I)}).$mount("#app")}},s={};function n(i){var e=s[i];if(void 0!==e)return e.exports;var a=s[i]={exports:{}};return t[i].call(a.exports,a,a.exports,n),a.exports}n.m=t,function(){var t=[];n.O=function(s,i,e,a){if(!i){var r=1/0;for(u=0;u<t.length;u++){i=t[u][0],e=t[u][1],a=t[u][2];for(var o=!0,l=0;l<i.length;l++)(!1&a||r>=a)&&Object.keys(n.O).every((function(t){return n.O[t](i[l])}))?i.splice(l--,1):(o=!1,a<r&&(r=a));if(o){t.splice(u--,1);var c=e();void 0!==c&&(s=c)}}return s}a=a||0;for(var u=t.length;u>0&&t[u-1][2]>a;u--)t[u]=t[u-1];t[u]=[i,e,a]}}(),function(){n.n=function(t){var s=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(s,{a:s}),s}}(),function(){n.d=function(t,s){for(var i in s)n.o(s,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:s[i]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){n.o=function(t,s){return Object.prototype.hasOwnProperty.call(t,s)}}(),function(){var t={524:0};n.O.j=function(s){return 0===t[s]};var s=function(s,i){var e,a,r=i[0],o=i[1],l=i[2],c=0;if(r.some((function(s){return 0!==t[s]}))){for(e in o)n.o(o,e)&&(n.m[e]=o[e]);if(l)var u=l(n)}for(s&&s(i);c<r.length;c++)a=r[c],n.o(t,a)&&t[a]&&t[a][0](),t[a]=0;return n.O(u)},i=self["webpackChunkmusic"]=self["webpackChunkmusic"]||[];i.forEach(s.bind(null,0)),i.push=s.bind(null,i.push.bind(i))}();var i=n.O(void 0,[504],(function(){return n(617)}));i=n.O(i)})();
//# sourceMappingURL=app.086471e4.js.map